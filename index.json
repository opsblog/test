[{"date":"1584826587", "url":"https://opsblog.de/2020/03/21/einfaches-vpn-mit-wireguard-fuer-homeoffice/", "title":"Einfaches VPN mit Wireguard f√ºr Homeoffice", "summary":"Aufgrund der ‚ÄûCorona-Kriese‚Äú m√∂chte auch ich etwas f√ºr unser Land tun und hier eine leicht Verst√§ndliche Anleitung schreiben wie man einen VPN-Zugang mithilfe von Wireguard f√ºr die Anwendung im Homeoffice einrichten kann.", "content":"Aufgrund der ‚ÄûCorona-Kriese‚Äú m√∂chte auch ich etwas f√ºr unser Land tun und hier eine leicht Verst√§ndliche Anleitung schreiben wie man einen VPN-Zugang mithilfe von Wireguard f√ºr die Anwendung im Homeoffice einrichten kann.\nWireguard ist eine recht neue VPN-L√∂sung mit einem sehr schlanken und effizienten Protokoll, welches sich zudem auch noch sehr einfach einrichten l√§sst (im Vergleich z.B. zu OpenVPN).\nIm Idealfall nutzen wir als Host-Betriebssystem f√ºr den Server ein Debian-Derivat-Linux mit einem 5.x Kernel, da die Wireguard Kernelmodule in Kerneln ab Version 5 bereits einkompiliert sind und man diese dann nicht selbst f√ºr den aktuell verwendeten Kernel neu bauen muss.\nHat man nicht den Genuss einen 5er Linux Kernel zu nutzen oder auf ihn zu upgraden, muss man die Wiregiard-Kernel Module f√ºr den verwendeten Kernel selbst bauen.\nDazu Installieren wir das Meta-Paket ‚Äûwireguard‚Äú aus dem Unstable zweig, welches dann die Pakete ‚Äûwireguard-dkms‚Äú und ‚Äûwireguard-tools‚Äú installiert:\n# echo \u0026quot;deb http://deb.debian.org/debian/ unstable main\u0026quot; | sudo tee /etc/apt/sources.list.d/unstable-wireguard.list\r# printf 'Package: *\\nPin: release a=unstable\\nPin-Priority: 90\\n' | sudo tee /etc/apt/preferences.d/limit-unstable\r# apt update\r# apt install wireguard\rNun werden die besagten Pakete ‚Äûwireguard-dkms‚Äú und ‚Äûwireguard-tools‚Äú installiert und ‚Äûwireguard-dkms‚Äú sorgt daf√ºr dass das Kernel-Modul erstellt wird:\nHolen:1 http://deb.debian.org/debian unstable/main amd64 wireguard-dkms all 0.0.20200215-2 [252 kB]\rHolen:2 http://deb.debian.org/debian unstable/main amd64 wireguard-tools amd64 1.0.20200206-2 [85,2 kB]\rHolen:3 http://deb.debian.org/debian unstable/main amd64 wireguard all 1.0.20200206-2 [7.316 B]\rEs wurden 345 kB in 0 s geholt (1.497 kB/s).\rVormals nicht ausgew√§hltes Paket wireguard-dkms wird gew√§hlt.\r(Lese Datenbank ... 67277 Dateien und Verzeichnisse sind derzeit installiert.)\rVorbereitung zum Entpacken von .../wireguard-dkms_0.0.20200215-2_all.deb ...\rEntpacken von wireguard-dkms (0.0.20200215-2) ...\rVormals nicht ausgew√§hltes Paket wireguard-tools wird gew√§hlt.\rVorbereitung zum Entpacken von .../wireguard-tools_1.0.20200206-2_amd64.deb ...\rEntpacken von wireguard-tools (1.0.20200206-2) ...\rVormals nicht ausgew√§hltes Paket wireguard wird gew√§hlt.\rVorbereitung zum Entpacken von .../wireguard_1.0.20200206-2_all.deb ...\rEntpacken von wireguard (1.0.20200206-2) ...\rwireguard-dkms (0.0.20200215-2) wird eingerichtet ...\rLoading new wireguard-0.0.20200215 DKMS files...\rBuilding for 4.9.0-6-amd64\rBuilding initial module for 4.9.0-6-amd64\rDone.\rwireguard:\rRunning module version sanity check.\r- Original module\r- No original module exists within this kernel\r- Installation\r- Installing to /lib/modules/4.9.0-6-amd64/updates/dkms/\rdepmod....\rDKMS: install completed.\rwireguard-tools (1.0.20200206-2) wird eingerichtet ...\rwireguard (1.0.20200206-2) wird eingerichtet ...\rTrigger f√ºr man-db (2.7.6.1-2) werden verarbeitet ...\rDamit haben wir Wireguard und das passende Kernel-Modul installiert und k√∂nnen nun an die Konfiguration gehen.\nHierf√ºr gehen wir in /etc/wireguard und erstellen uns einen public-key und einen private-key:\n# cd /etc/wireguard\r# wg genkey | tee privatekey | wg pubkey \u0026gt; publickey\rF√ºr mein Beispiel nutze ich folgende Keys:\nPrivate: 8NTdGTXDBH2pGLb08nMC007ZjpQE666PYrqmgyASUS= Public: I2btYR+gLPYDi76p/MyAnniSWbubELyh5YHoseKxu0s=\rDer Private-Key wird f√ºr die Server-Config genutzt. Der Public-Key wird dann in der Config der Clients hinterlegt.\nSinnvollerweise befinden sich die VPN-Clients alle in einem seperaten IP-Netz (10.0.0.x) wobei der VPN-Server die IP 10.0.0.1 bekommt und der erste Client dann die 10.0.0.2.\nMit diesem Wissen erstellen wir nun die Server-Konfiguration in /etc/wireguard/wg0.conf:\n[Interface]\rAddress = 10.0.0.1/24\rSaveConfig = false\rPostUp = iptables -A FORWARD -i wg0 -j ACCEPT; iptables -A FORWARD -o wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE; PostDown = iptables -D FORWARD -i wg0 -j ACCEPT; iptables -D FORWARD -o wg0 -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE; ListenPort = 51820\rFwMark = 0xca6c\rPrivateKey = 8NTdGTXDBH2pGLb08nMC007ZjpQE666PYrqmgyASUS=\rDas war es auch schon grunds√§tzlich zur Server-Config. Sp√§ter mussen hier noch die Zug√§nge der Clients mit rein ‚Äì das folgt weiter unten.\nDer Wireguard-Server l√§uft auf Port 51820, was bedeutet das wir diesen Port in der Firewall freigeben bzw ein Portforwarding f√ºr diesen Port erstellen m√ºssen.\nAusserdem muss der Eintrag ‚Äûnet.ipv4.ip_forward = 1‚Äú in der /etc/sysctl.conf auskommentiert werden.\nMein Wireguard Client ist ein Windows10 PC.\nDie Client-Installation k√∂nnen wir uns unter https://www.wireguard.com/install bzw. als Direktlink (64Bit) unter https://download.wireguard.com/windows-client/wireguard-amd64-0.1.0.msi herunterladen und installieren.\nNachdem Wireguard auf dem Client installiert und ge√∂ffnet ist, k√∂nnen wir √ºber ‚ÄûStrg+N‚Äú oder ‚ÄûAdd empty Tunnel..‚Äú einen neuen Tunnel definieren.\nWichtig ist hier als erstes der Public-Key welcher oben eingeblendet wird (z.B. 6n89/e9rMmXYaymRDMYnnjJ7LgiVnP6GKplHYN6+BQY=).\nDiesen Client-PublicKey brauchen wir um den Client in der Server-Config mit aufzunehmen.\nAn dieser Stelle geht es aber erst einmal mit der Client-Config weiter.\n# Angabe des VPN-Client (PrivateKey und VPN-IP)\r[Interface]\rPrivateKey = 8OvLmuLKv2GUSfeJ4bcEGF2mTeuySKJhoBQPlSgmGUA=\rAddress = 10.0.0.2/32\r# Angabe des VPN-Servers (Public-Key, IP¬¥s welche √ºber VPN geroutet werden und der Endpunkt des VPN-Servers)\r[Peer]\rPublicKey = I2btYR+gLPYDi76p/MyAnniSWbubELyh5YHoseKxu0s=\rAllowedIPs = 10.0.0.1, 192.168.1.0/24\rEndpoint = vpn.meinefirma.de:51820\rKurze Erkl√§rung: Mein ‚ÄûFirmen-Netz‚Äú, welches ich √ºber den VPN-Tunnel erreichen m√∂chte ist das 192.168.1.x Netz.\n√úber den Eintrag ‚ÄûAllowedIPs‚Äú gebe ich hier an welche IP¬¥s/Netze √ºber den VPN-Tunnel geroutet werden sollen.\nIm Wireguard-Client selbst sieht das ganze dann so aus:\nJetzt m√ºssen wir weider zur√ºck zu der Server-Config und den Client in der Konfiguration mit angeben.\nDaf√ºr f√ºgen wir Analog zur Client-Config auch einen [Peer] Abschnitt unten mit in die /etc/wireguard/wg0.conf ein:\n# VPN-Client Sven (Angabe des PublicKey und der IP des Clients)\r[Peer]\rPublicKey = 6n89/e9rMmXYaymRDMYnnjJ7LgiVnP6GKplHYN6+BQY=\rAllowedIPs = 10.0.0.2/32\rDas wars auch schon. Jetzt haben wir Wireguard auf Server und Client Installiert und eingerichtet.\nDann wollen wir den Server auch mal starten. Der Start und Stop funktioniert √ºber die wg-quick Befehle.\nZum Starten reicht ein ‚Äûwg-quick up wg0‚Äú und zum beenden analog dazu ein ‚Äûwg-quick down wg0‚Äú.\nDie Ausgabe des ‚Äûwg-quick up wg0‚Äú sollte dann so aussehen:\n# wg-quick up wg0\r[#] ip link add wg0 type wireguard\r[#] wg setconf wg0 /dev/fd/63\r[#] ip -4 address add 10.0.0.1/24 dev wg0\r[#] ip link set mtu 1420 up dev wg0\r[#] iptables -A FORWARD -i wg0 -j ACCEPT; iptables -A FORWARD -o wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE;\rDamit l√§uft Wireguard als VPN-Server.\nIm Windows-Client muss man nun nur noch auf dem Knopf ‚ÄûActivate‚Äú dr√ºcken ‚Äì und es wird eine Verbindung zum VPN-Server aufgebaut.\nAb nun k√∂nnen wir von ‚Äûremote‚Äú auf das ‚ÄûFirmen‚Äú-Netz zugreifen.\n","tags":["Linux"], "section": "post"},{"date":"1533665798", "url":"https://opsblog.de/2018/08/07/arduino-einfuehrung/", "title":"Arduino ‚Äì Einf√ºhrung", "summary":"Dies ist der erste Teil einer Arduino-Reihe.\nAufgrund aktueller Projekte habe ich wieder vermehrt mit Arduino zu tun, so dass ich in meinen Unterlagen von 2016 rumsuchen und experimentieren musste ‚Äì also wollte ich meine Unterlagen in diesem Zuge gleich mit digitalisieren.", "content":"Dies ist der erste Teil einer Arduino-Reihe.\nAufgrund aktueller Projekte habe ich wieder vermehrt mit Arduino zu tun, so dass ich in meinen Unterlagen von 2016 rumsuchen und experimentieren musste ‚Äì also wollte ich meine Unterlagen in diesem Zuge gleich mit digitalisieren.\nMeine Projekte f√ºhre ich zum Gro√üteil mit dem Arduino Nano durch ‚Äì einfach aus dem Grund weil es diese Boards im China-Shop im 10er Pack recht g√ºnstig gibt.\nNormalerweise fangen die Leute mit dem Arduino Uno an ‚Äì beide Boards (Uno und Nano) unterscheiden sich aber kaum von der Technischen Seite.\nHier der Offizielle Link zum Arduino Uno: https://store.arduino.cc/arduino-uno-rev3\nUnd hier zum Arduino Nano: https://store.arduino.cc/arduino-nano\nDer gr√∂√üte unterschied den man auf dem ersten Blick sieht ist wohl die Gr√∂√üe des Boards an sich.\nDer Arduino Nano eignet sich eher f√ºr die Steckbrett-Versuche aufgrund der Breadboard-kompatiblen Gr√∂√üe.\nOkay.. dann fangen wir mal an.\nWir haben jetzt im Idealfall einen Arduino Uno oder Nano vor uns liegen, ein Steckbrett, ein paar Kabel, ein paar LED¬¥s und ein paar Wiederst√§nde (dazu sp√§ter mehr).\nWie fangen wir nun an?\nAls erstes brauchen wir eine Software um die Programme zu schreiben die sp√§ter auf den Arduino laufen sollen.\nHierf√ºr nutzt man Standardm√§√üig die Arduino-IDE welche man in der Version 1.8.5 unter https://www.arduino.cc/download_handler.php?f=/arduino-1.8.5-windows.zip als portable Version herunterladen kann.\nDiese habe ich bei mir in das Verzeichnis C:\\Arduino\\arduino-1.8.5 gelegt. Dort drin befindet sich nun die IDE, welche wir √ºber die Arduino.exe aufrufen k√∂nnen.\nSobald man die IDE Aufgerufen hat, bekommt man einen neuen Sketch angezeigt.\nSketche nennt man die Programme, welche man mit der Arduino-IDE schreibt.\nDer neue Sketch sieht dann in etwa so aus:\nvoid setup() { // put your setup code here, to run once:  } void loop() { // put your main code here, to run repeatedly:  } Im Prinzip gibt es eine setup() Funktion in der man alle relevanten Einstellungen VOR dem Programmstart hinterlegt ‚Äì und es gibt eine loop(), also eine Endlosschleife, welche immer wieder durch den Arduino aufgerufen wird.\nNun kennen wir auch das Funktionsprinzip des Arduinos ‚Äì alles wird in einer Endlosschleife ausgef√ºhrt.\nUm das etwas genauer zu sehen, √∂ffnen wir eines der vielen Beispiele, welche zusammen mit der Arduino-IDE ausgeliefert werden unter: Datei -\u0026gt; Beispiele -\u0026gt; 01.Basics -\u0026gt; Blink\nDieses Blink-Programm l√§uft Standardm√§√üig auf jedem Arduino Board. Wenn man jetzt den UNO oder Nano √ºber USB an eine Stromquelle anschlie√üen w√ºrde, w√ºrde dieses Programm vom Werk aus darauf laufen ‚Äì und eine LED auf dem Arduino-Board blinken.\nDer Sketch daf√ºr sieht dann so aus:\n// the setup function runs once when you press reset or power the board void setup() { // initialize digital pin 13 as an output.  pinMode(13, OUTPUT); } // the loop function runs over and over again forever void loop() { digitalWrite(13, HIGH); // turn the LED on (HIGH is the voltage level)  delay(1000); // wait for a second  digitalWrite(13, LOW); // turn the LED off by making the voltage LOW  delay(1000); // wait for a second } Wie oben erw√§hnt setzen wir in der Setup() Funktion die Einstellungen die vor dem eigentlichen Programmstart feststehen sollen. In diesem Fall wird der GPIO-Pin 13 als Ausgang definiert. An diesem Pin ist in den meisten F√§llen eine LED auf dem Board angeschlossen.\nIn der loop() wird nun gesagt das am Pin 13 ein HIGH Signal angelegt werden soll.\nDies geschieht durch die Funktion digitalWrite() da der Pin 13 ein Digitaler Pin ist.\nDa der Arduino mit einer Spannung von 5V arbeitet bedeutet das HIGH Signal hier, das diese 5V durchgereicht werden und die LED leuchtet.\nDanach wird √ºber das delay(1000) eine Wartezeit von 1000ms ‚Äì also einer Sekunde ‚Äì festgelegt, bevor das Programm weiter ausgef√ºhrt wird.\nDann wird ein LOW Signal, also 0V am Pin 13 ausgegeben ‚Äì damit leuchtet die LED dann nicht mehr.\nUnd am ende wird wieder eine Sekunde gewartet.\nDa uns eine Sekunde zu langsam ist, √§ndern wir die 1000ms hier einfach mal in 100ms ab.\nWenn wir nun den Arduino √ºber ein USB-Kabel an den PC anschlie√üen, k√∂nnen wir diesen in der Arduino-IDE ausw√§hlen:\nUnter ‚ÄûWerkzeuge‚Äú -\u0026gt; ‚ÄûBoard, Prozessor, Port‚Äú: Arduino Nano, ATmega328 on COM3\n√úber den Button1 (erste Knopf oben links in der Arduino-IDE) kann man nun das Programm kompilieren und schauen ob man Fehler gemacht hat. F√ºr dieses Beispiel werden aber keine Fehler gefunden.\nNun kann man √ºber den Button2 (Rechts neben Button1 in der Arduino-IDE) das Programm zum Arduino geben.\nIn der IDE sollte dann in etwa so eine Ausgabe erscheinen:\nDer Sketch verwendet 1.030 Bytes (3%) des Programmspeicherplatzes. Das Maximum sind 30.720 Bytes.\rGlobale Variablen verwenden 9 Bytes (0%) des dynamischen Speichers, 2.039 Bytes f√ºr lokale Variablen verbleiben. Das Maximum sind 2.048 Bytes.\rWenn dieser dann fertig ist, startet er neu und das neue Programm l√§uft. Was wir nun sehen ist das die LED nicht mehr jede Sekunde blinkt, sondern alle 100 Millisekunden.\nSehr sch√∂n! Da haben wir doch schon einiges f√ºr den Anfang geschafft üôÇ\n","tags":["Arduino"], "section": "post"},{"date":"1483712219", "url":"https://opsblog.de/2017/01/06/sql-server-localdb-mehrere-versionen-verwalten/", "title":"SQL Server localdb ‚Äì Mehrere Versionen verwalten", "summary":"Vor einiger Zeit habe ich HIER schon mal etwas √ºber SQLServer 2012 localdb geschrieben.\nMittlerweile gibt es von der localdb installation mehrere Versionen (Aktuell: 2012 / 2014 / 2016).\nUm Herauszufinden welche Versionen auf dem System installiert sind, kann der Befehl ‚Äûsqllocaldb versions‚Äú genutzt werden:\nE:\\Programme\\cmder\u0026gt;sqllocaldb versions Microsoft SQL Server 2012 (11.0.5058.0) Microsoft SQL Server 2014 (12.0.4100.1) Microsoft SQL Server 2016 (13.0.1601.5) Microsoft SQL Server 2017 (14.0.1000.169) Standardm√§√üig wird eine neue Datenbank-Instanz √ºber den ‚ÄûCreate‚Äú-Befehl mit der aktuelleren Version angelegt.\nM√∂chte man eine Instanz mit der 2012er Version anlegen, geht dies so:\nE:\\Programme\\cmder\u0026gt;sqllocaldb create SQL2012 11.0.5058.0 LocalDB instance \u0026quot;SQL2012\u0026quot; created with version 11.0.5058.0. Und f√ºr die 2014er Version so:\nE:\\Programme\\cmder\u0026gt;sqllocaldb create SQL2014 12.0.4100.1 LocalDB instance \u0026quot;SQL2014\u0026quot; created with version 12.0.4100.1. Ebenfalls kann so auch explizit eine 2016er Instanz angelegt werden:\nE:\\Programme\\cmder\u0026gt;sqllocaldb create SQL2016 13.0.1601.5 LocalDB instance \u0026quot;SQL2016\u0026quot; created with version 13.0.1601.5. Oder f√ºr eine 2017er Instanz:\nE:\\Programme\\cmder\u0026gt;sqllocaldb create SQL2017 14.0.1000.169 LocalDB instance \u0026quot;SQL2017\u0026quot; created with version 14.0.1000.169. ", "content":"Vor einiger Zeit habe ich HIER schon mal etwas √ºber SQLServer 2012 localdb geschrieben.\nMittlerweile gibt es von der localdb installation mehrere Versionen (Aktuell: 2012 / 2014 / 2016).\nUm Herauszufinden welche Versionen auf dem System installiert sind, kann der Befehl ‚Äûsqllocaldb versions‚Äú genutzt werden:\nE:\\Programme\\cmder\u0026gt;sqllocaldb versions Microsoft SQL Server 2012 (11.0.5058.0) Microsoft SQL Server 2014 (12.0.4100.1) Microsoft SQL Server 2016 (13.0.1601.5) Microsoft SQL Server 2017 (14.0.1000.169) Standardm√§√üig wird eine neue Datenbank-Instanz √ºber den ‚ÄûCreate‚Äú-Befehl mit der aktuelleren Version angelegt.\nM√∂chte man eine Instanz mit der 2012er Version anlegen, geht dies so:\nE:\\Programme\\cmder\u0026gt;sqllocaldb create SQL2012 11.0.5058.0 LocalDB instance \u0026quot;SQL2012\u0026quot; created with version 11.0.5058.0. Und f√ºr die 2014er Version so:\nE:\\Programme\\cmder\u0026gt;sqllocaldb create SQL2014 12.0.4100.1 LocalDB instance \u0026quot;SQL2014\u0026quot; created with version 12.0.4100.1. Ebenfalls kann so auch explizit eine 2016er Instanz angelegt werden:\nE:\\Programme\\cmder\u0026gt;sqllocaldb create SQL2016 13.0.1601.5 LocalDB instance \u0026quot;SQL2016\u0026quot; created with version 13.0.1601.5. Oder f√ºr eine 2017er Instanz:\nE:\\Programme\\cmder\u0026gt;sqllocaldb create SQL2017 14.0.1000.169 LocalDB instance \u0026quot;SQL2017\u0026quot; created with version 14.0.1000.169. Hier noch einmal die Komplette SQL Server localdb Hilfe:\nE:\\Programme\\cmder\u0026gt;sqllocaldb -? Microsoft (R) SQL Server Express LocalDB Command Line Tool Version 11.0.5058.0 Copyright (c) Microsoft Corporation. All rights reserved. Usage: SqlLocalDB operation [parameters...] Operations: -? Prints this information create|c \u0026quot;instance name\u0026quot; [version-number] [-s] Creates a new LocalDB instance with a specified name and version If the [version-number] parameter is omitted, it defaults to the SqlLocalDB product version. -s starts the new LocalDB instance after it's created delete|d \u0026quot;instance name\u0026quot; Deletes the LocalDB instance with the specified name start|s \u0026quot;instance name\u0026quot; Starts the LocalDB instance with the specified name stop|p \u0026quot;instance name\u0026quot; [-i|-k] Stops the LocalDB instance with the specified name, after current queries finish -i request LocalDB instance shutdown with NOWAIT option -k kills LocalDB instance process without contacting it share|h [\u0026quot;owner SID or account\u0026quot;] \u0026quot;private name\u0026quot; \u0026quot;shared name\u0026quot; Shares the specified private instance using the specified shared name. If the user SID or account name is omitted, it defaults to current user. unshare|u \u0026quot;shared name\u0026quot; Stops the sharing of the specified shared LocalDB instance. info|i Lists all existing LocalDB instances owned by the current user and all shared LocalDB instances. info|i \u0026quot;instance name\u0026quot; Prints the information about the specified LocalDB instance. versions|v Lists all LocalDB versions installed on the computer. trace|t on|off Turns tracing on and off SqlLocalDB treats spaces as delimiters. It is necessary to surround instance names that contain spaces and special characters with quotes. For example: SqlLocalDB create \u0026quot;My LocalDB Instance\u0026quot; ","tags":["MSSQL"], "section": "post"}]